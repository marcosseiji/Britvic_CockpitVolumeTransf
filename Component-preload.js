//@ui5-bundle br/com/konitech/CockpitManualControlVolumesTransf/Component-preload.js
jQuery.sap.registerPreloadedModules({
"version":"2.0",
"modules":{
	"br/com/konitech/CockpitManualControlVolumesTransf/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","br/com/konitech/CockpitManualControlVolumesTransf/model/models"],function(e,t,o){"use strict";return e.extend("br.com.konitech.CockpitManualControlVolumesTransf.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(o.createDeviceModel(),"device")}})});
},
	"br/com/konitech/CockpitManualControlVolumesTransf/controller/App.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller"],function(n){"use strict";return n.extend("br.com.konitech.CockpitManualControlVolumesTransf.controller.App",{onInit:function(){}})});
},
	"br/com/konitech/CockpitManualControlVolumesTransf/controller/Main.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox","../util/formatter","sap/ui/model/resource/ResourceModel"],function(e,t,o,s,i,r){"use strict";return e.extend("br.com.konitech.CockpitManualControlVolumesTransf.controller.Main",{formatter:i,i18n:new r({bundleName:"br.com.konitech.CockpitManualControlVolumesTransf.i18n.i18n"}),onInit:function(){},onBeforeRendering:function(){const e=this.getView();sap.ui.getCore().getLibraryResourceBundle("sap.ui.unified");if(!this.oModel){this.oModel=new t}this.onLoadModel();document.title=this.getView().getModel("i18n").getResourceBundle().getText("appTitle")},onLoadModel:async function(){await this.oModel.loadData("model/data.json");this.oModel.setProperty("/isVisible",false);this.getView().setModel(this.oModel)},onChangeComboPlant:function(e){var t=e.getSource().getSelectedKey(),o=this.getView().byId("tank_type").getSelectedIndex(),s=this.onGetTankType(o);this.onLoadComboTank(t,s)},onChangeType:function(e){var t=this.getView().byId("combo_plant").getSelectedKey(),o=e.getSource().getSelectedIndex(),s=this.onGetTankType(o);this.onLoadComboTank(t,s)},onLoadPlants:function(e){},onEnableEditButton:function(e){var t=this.oModel.getProperty("/plantsProg");return t.includes(e)?true:false},onLoadComboTank:function(e,t){const o=this.oModel.getData().Tanks.filter(e=>e.TYPE==t);this.oModel.setProperty("/ComboTanks",o)},onSearch:function(){var e="PSG/App/CockpitManualCtrlVolTransf/Query/XAC_CockpitManualCtrlVolTransfSelectQuery",t=this.getView(),s=t.byId("combo_plant").getSelectedKey(),i=t.byId("tank_type").getSelectedIndex(),r=t.byId("combo_tank").getSelectedKey(),n=this.onGetTankType(i),a={plant:s,type:n,tank:r},l=`I_JSON={"HOST":"", "DT_ENV":"", "HR_ENV":"", "CD_PLANT":"${s}", "TYPE_ID": "${n}", "CD_TANK": "${r}"}&I_REQ=SEL`;this.oModel.setProperty("/plantDescSelected",this.oModel.getData().Plants.filter(e=>e.CD_PLANT==s)[0].DS_PLANT);this.oModel.setProperty("/tankDescSelected",this.oModel.getData().Tanks.filter(e=>e.CD_TANK==r)[0].DS_TANK);this.oModel.setProperty("/plantSelected",s);this.oModel.setProperty("/tankSelected",r);this.oModel.setProperty("/isTankMovStart",false);if(n&&r){t.byId("combo_plant").setValueState("None");t.byId("combo_tank").setValueState("None");if(t.byId("BL").getSelected()){this.oModel.setProperty("/isVisibleBL",true)}else{this.oModel.setProperty("/isVisibleBL",false);t.byId("destTitle").setText("")}t.byId("TankContent").setVisible(true);this.setTileTitles(this.oModel.getProperty("/Form")[0].STAT_ID);this.onCheckTankMovStart(e,this.oModel.getProperty("/Form"),s,r)}else{if(!s){t.byId("combo_plant").setValueState("Error")}else{t.byId("combo_plant").setValueState("None")}if(!r){t.byId("combo_tank").setValueState("Error")}else{t.byId("combo_tank").setValueState("None")}o.show(this.getView().getModel("i18n").getResourceBundle().getText("errMsgInvalidInputFilters"))}},onCheckTankMovStart:function(e,t,o,s){var i=this.getView().byId("bt_mov_tanks"),r=`I_JSON={"HOST":"", "DT_ENV":"", "HR_ENV":"", "CD_PLANT":"${o}", "CD_TANK": "${s}"}&I_REQ=TANK`;if(t.STAT_ID=="3"||t.STAT_ID=="4"||t.STAT_ID=="5"){var n=`I_JSON={"HOST":"", "DT_ENV":"", "HR_ENV":"", "CD_PLANT":"${o}", "CD_TANK": "${s}", "BATCH": "${t.BATCH}"}&I_REQ=MOV`;this.onLoadComboTankDest(e,r).then(t=>{this.oModel.setProperty("/ComboTanksDest",t);this.onLoadFormTankOrig(e,n).then(e=>{i.setType("Emphasized");i.setText(this.i18n.getResourceBundle().getText("button_mov_tanks_i"));this.oModel.setProperty("/isTankMovStart",true);if(this.oModel.getProperty("/ComboTanksDest")){this.oModel.setProperty("/ComboTanksDest",this.oModel.getProperty("/ComboTanksDest").filter(e=>e.STAT_ID==="1"));this.oModel.setProperty("/isStripVisible",false)}else{this.oModel.setProperty("/isStripVisible",true)}},e=>{i.setType("Default");this.oModel.setProperty("/formTankOrig","");this.oModel.setProperty("/isTankMovStart",false);if(this.oModel.getProperty("/ComboTanksDest")){this.oModel.setProperty("/isStripVisible",false)}else{this.oModel.setProperty("/isStripVisible",true)}i.setText(this.i18n.getResourceBundle().getText("button_mov_tanks"))})},t=>{console.log(t);this.onLoadFormTankOrig(e,n).then(e=>{i.setType("Emphasized");i.setText(this.i18n.getResourceBundle().getText("button_mov_tanks_i"));this.oModel.setProperty("/isTankMovStart",true);if(this.oModel.getProperty("/ComboTanksDest")){this.oModel.setProperty("/ComboTanksDest",this.oModel.getProperty("/ComboTanksDest").filter(e=>e.STAT_ID==="1"));this.oModel.setProperty("/isStripVisible",false)}else{this.oModel.setProperty("/isStripVisible",true)}},e=>{i.setType("Default");this.oModel.setProperty("/formTankOrig","");this.oModel.setProperty("/isTankMovStart",false);if(this.oModel.getProperty("/ComboTanksDest")){this.oModel.setProperty("/isStripVisible",false)}else{this.oModel.setProperty("/isStripVisible",true)}i.setText(this.i18n.getResourceBundle().getText("button_mov_tanks"))})});this.oModel.setProperty("/isVisibleButtonMov",true)}else{this.oModel.setProperty("/isVisibleButtonMov",false)}},onLoadFormTankOrig:function(e,t){var o=this;var s=new Promise(function(s,i){o.onAjaxRequest(e,t).then(e=>{if(e.length>0){s(e)}else{i()}},e=>{i(e)})});return s},onLoadComboTankDest:function(e,t){var o=this;var s=new Promise(function(s,i){o.onAjaxRequest(e,t).then(e=>{s(e)},e=>{i(e)})});return s},onPressTile:function(e){var t=this,o=e.getSource().mProperties.number,s=this.oModel.getProperty("/plantSelected"),i=this.oModel.getProperty("/tankSelected"),r="PSG/App/CockpitManualCtrlVolTransf/Query/XAC_CheckTankSecurity",n=`I_JSON={"CD_PLANT":"${s}", "CD_TANK": "${i}"}`;t.onExecuteTile(o)},onExecuteTile:function(e){var t=this.getView().byId("combo_plant").getSelectedKey(),i=this.oModel.getProperty("/Form/0/").STAT_ID,r=this.getView(),n=r.getModel("i18n").getResourceBundle(),a=n.getText("title_status1"),l=n.getText("title_status2"),u=n.getText("title_status3"),T=n.getText("title_status4"),g=n.getText("title_status5"),c=this.oModel,p=false,d=!!this.getView().$().closest(".sapUiSizeCompact").length,_="item",D=false;if(D){s.warning(n.getText("blockAutoMsg"),{icon:s.Icon.WARNING,title:this.getView().getModel("i18n").getResourceBundle().getText("Attention"),actions:[sap.m.MessageBox.Action.OK],styleClass:d?"sapUiSizeCompact":"",initialFocus:s.Action.OK})}else{this.tileNumber=e;if(p){s.warning(n.getText("errMovTankStart"),{icon:s.Icon.WARNING,title:this.getView().getModel("i18n").getResourceBundle().getText("Attention"),actions:[sap.m.MessageBox.Action.OK],styleClass:d?"sapUiSizeCompact":"",initialFocus:s.Action.OK});return}this.tileNumber=e;if(e===i){switch(i){case"1":c.setProperty("/tileTitle",a);this.onOpenFields(i);this.onCreateDialog(_);break;case"2":c.setProperty("/tileTitle",l);this.onOpenFields(i);this.onCreateDialog(_);break;case"3":c.setProperty("/tileTitle",u);this.onOpenFields(i);this.onCreateDialog(_);break;case"4":c.setProperty("/tileTitle",T);this.onOpenFields(i);this.onCreateDialog(_);break;case"5":c.setProperty("/tileTitle",g);this.onOpenFields(i);this.onCreateDialog(_);break}}else{if(e==="1"&&(i==="1"||i==="6")){c.setProperty("/tileTitle",a);this.onOpenFields("1");this.onCreateDialog(_)}else if(e==="2"&&i==="1"||e==="2"&&i==="2"){c.setProperty("/tileTitle",l);this.onOpenFields("2");this.oModel.setProperty("/TANK_PROD_PERC",100);this.onCreateDialog(_)}else{o.show(this.getView().getModel("i18n").getResourceBundle().getText("msgFaseIni"))}}}},onOpenFields:function(e){var t=this.oModel;this.onCloseAllFileds();switch(e){case"1":t.setProperty("/inputDtStVisible",true);t.setProperty("/inputQtEnvVisible",true);t.setProperty("/uomVisible",true);t.setProperty("/btText",this.getView().getModel("i18n").getResourceBundle().getText("button_execute"));t.setProperty("/callFunction","onFilling");break;case"2":t.setProperty("/dtStVisible",true);t.setProperty("/inputDtFinVisible",true);t.setProperty("/inputQtEnvVisible",true);t.setProperty("/uomVisible",true);t.setProperty("/percVisible",true);t.setProperty("/finalConfirm",true);t.setProperty("/btText",this.getView().getModel("i18n").getResourceBundle().getText("button_execute"));t.setProperty("/callFunction","onHomogenizing");break;case"3":t.setProperty("/duVisible",true);t.setProperty("/typeDestVisible",true);t.setProperty("/TankDestVisible",true);t.setProperty("/OrderDestVisible",true);t.setProperty("/btText",this.getView().getModel("i18n").getResourceBundle().getText("button_confirm"));t.setProperty("/callFunction","onAnalyze");break;case"4":t.setProperty("/duVisible",true);t.setProperty("/typeDestVisible",true);t.setProperty("/TankDestVisible",true);t.setProperty("/OrderDestVisible",true);t.setProperty("/btText",this.getView().getModel("i18n").getResourceBundle().getText("button_confirm"));t.setProperty("/callFunction","onReleased");break;case"5":t.setProperty("/qtEnvVisible",true);t.setProperty("/duVisible",true);t.setProperty("/TankDestVisible",true);t.setProperty("/OrderDestVisible",true);t.setProperty("/btText",this.getView().getModel("i18n").getResourceBundle().getText("button_execute"));t.setProperty("/callFunction","onTransferring");break;default:break}},setTileTitles:function(e){var t=this.oModel,o=this.getView().getModel("i18n").getResourceBundle();switch(e){case"1":t.setProperty("/titleTile1","");t.setProperty("/titleTile2","");t.setProperty("/titleTile3","");t.setProperty("/titleTile4","");t.setProperty("/titleTile5","");t.setProperty("/titleTile6","");t.setProperty("/infoTile1",this.oModel.getProperty("/Form")[0].BATCH);t.setProperty("/infoTile2",o.getText("info_next_step"));t.setProperty("/infoTile3","");t.setProperty("/infoTile4","");t.setProperty("/infoTile5","");break;case"2":t.setProperty("/titleTile1","");t.setProperty("/titleTile2",o.getText("title_prod_confirm"));t.setProperty("/titleTile3","");t.setProperty("/titleTile4","");t.setProperty("/titleTile5","");t.setProperty("/infoTile1",this.oModel.getProperty("/Form")[0].BATCH);t.setProperty("/infoTile2",this.oModel.getProperty("/Form")[0].DT_FIM);t.setProperty("/infoTile3","");t.setProperty("/infoTile4","");t.setProperty("/infoTile5","");break;case"3":t.setProperty("/titleTile1","");t.setProperty("/titleTile2","");t.setProperty("/titleTile3",o.getText("title_waiting"));t.setProperty("/titleTile4","");t.setProperty("/titleTile5","");t.setProperty("/infoTile1",this.oModel.getProperty("/Form")[0].BATCH);t.setProperty("/infoTile2",this.oModel.getProperty("/Form")[0].DT_FIM);t.setProperty("/infoTile3",o.getText("info_next_step"));t.setProperty("/infoTile4","");t.setProperty("/infoTile5","");break;case"4":t.setProperty("/titleTile1","");t.setProperty("/titleTile2","");t.setProperty("/titleTile3","");t.setProperty("/titleTile4",o.getText("title_available"));t.setProperty("/titleTile5","");t.setProperty("/titleTile6","");t.setProperty("/infoTile1",this.oModel.getProperty("/Form")[0].BATCH);t.setProperty("/infoTile2",this.oModel.getProperty("/Form")[0].DT_FIM);t.setProperty("/infoTile3",this.oModel.getProperty("/Form")[0].DS_DU);t.setProperty("/infoTile4",o.getText("inf_dest_confirm"));t.setProperty("/infoTile5","");break;case"5":t.setProperty("/titleTile1","");t.setProperty("/titleTile2","");t.setProperty("/titleTile3","");t.setProperty("/titleTile4","");t.setProperty("/titleTile5",this.oModel.getProperty("/Form")[0].TANK_DEST);t.setProperty("/infoTile1",this.oModel.getProperty("/Form")[0].BATCH);t.setProperty("/infoTile2",this.oModel.getProperty("/Form")[0].DT_FIM);t.setProperty("/infoTile3",this.oModel.getProperty("/Form")[0].DS_DU);t.setProperty("/infoTile4",o.getText("inf_dest_confirm"));t.setProperty("/infoTile5",this.oModel.getProperty("/Form")[0].DS_DEST);t.setProperty("/titleTile6","");break;default:t.setProperty("/titleTile1",o.getText("title_batch"));t.setProperty("/titleTile2","");t.setProperty("/titleTile3","");t.setProperty("/titleTile4","");t.setProperty("/titleTile5","");t.setProperty("/infoTile1",o.getText("info_next_step"));t.setProperty("/infoTile2","");t.setProperty("/infoTile3","");t.setProperty("/infoTile4","");t.setProperty("/infoTile5","");t.setProperty("/titleTile6",o.getText("title_tile_current_step"));break}},onCloseAllFileds:function(){var e=this.oModel;e.setProperty("/duVisible",false);e.setProperty("/inputDtStVisible",false);e.setProperty("/dtStVisible",false);e.setProperty("/dtFinVisible",false);e.setProperty("/inputDtFinVisible",false);e.setProperty("/qtEnvVisible",false);e.setProperty("/inputQtEnvVisible",false);e.setProperty("/uomVisible",false);e.setProperty("/percVisible",false);e.setProperty("/typeDestVisible",false);e.setProperty("/TankDestVisible",false);e.setProperty("/OrderDestVisible",false);e.setProperty("/finalConfirm",false)},onPress:function(){var e=this.oModel.getProperty("/Form")[0].STAT_ID;if(this.tileNumber==="2"){this.onHomogenizing()}else{switch(e){case"1":this.onFilling();break;case"2":this.onHomogenizing();break;case"3":this.onAnalyze();break;case"4":this.onReleased();break;case"5":this.onTransferring();break;case"6":this.onFilling();break}}},onFilling:function(){var e=this,t=this.getView(),i=!!this.getView().$().closest(".sapUiSizeCompact").length,r=this.oModel.getProperty("/Form")[0],n=r.BATCH,a=r.CD_PLANT,l=r.ORDER_NUMBER,u=r.CD_TANK,T=sap.ui.getCore().byId("inputProdQty"),g=sap.ui.getCore().byId("inputProdQty").getValue()||0,c=r.UOM_ENV,p=(new Date).toLocaleDateString(),d=(new Date).toLocaleTimeString(),_=sap.ui.getCore().byId("inputDtStart"),D=sap.ui.getCore().byId("inputDtStart").getValue().substr(0,10),C=sap.ui.getCore().byId("inputDtStart").getValue().substr(11,9),S="PSG/Inbound/ShopFloor/BatchCreation/Query/XAC_BatchCreationInsertQuery",y=`I_JSON={"HOST": "MII", "DT_ENV": "${p}","HR_ENV":"${d}", "CD_PLANT": "${a}", "ORDER_NUMBER":"${l}",  "CD_TANK": "${u}"}`,I="PSG/Inbound/ShopFloor/OpStatusBlenderAutomation/Query/XAC_OpStatusBlenderAutomationInsertQuery";var h;if(!_.getValue()||!_._bValid){o.show(t.getModel("i18n").getResourceBundle().getText("errMsgInvalidInput"));_.setValueState("Error")}else if(g<=0){o.show(t.getModel("i18n").getResourceBundle().getText("errMsgInvalidInput"));T.setValueState("Error");_.setValueState("None")}else{_.setValueState("None");T.setValueState("None");sap.ui.core.BusyIndicator.show(0);if(!n||n==="---"){this.onAjaxRequest(S,y).then(t=>{e.response=t;h=`I_JSON={"HOST": "MII", "DT_ENV": "${p}","HR_ENV":"${d}","CD_PLANT": "${a}", "BATCH": "${t[0].BATCH}", "CD_TANK": "${u}", "DT_INI_ENCH": "${D}", "HR_INI_ENCH": "${C}",  "DT_FIM_ENCH": "", "HR_FIM_ENCH": "", "STAT_ID": "1", "QT_ENV": "${g}", "UOM_ENV": "${c}"}`},t=>{s.error(e.getView().getModel("i18n").getResourceBundle().getText("errMsgErrBatchCreation")+" - "+t,{icon:s.Icon.ERROR,title:e.getView().getModel("i18n").getResourceBundle().getText("Attention"),actions:[sap.m.MessageBox.Action.OK],styleClass:i?"sapUiSizeCompact":"",initialFocus:s.Action.OK});sap.ui.core.BusyIndicator.hide()})}else{h=`I_JSON={"HOST": "MII", "DT_ENV": "${p}","HR_ENV":"${d}","CD_PLANT": "${a}", "BATCH": "${n}", "CD_TANK": "${u}", "DT_INI_ENCH": "${D}", "HR_INI_ENCH": "${C}",  "DT_FIM_ENCH": "", "HR_FIM_ENCH": "", "STAT_ID": "1", "QT_ENV": "${g}", "UOM_ENV": "${c}"}`;let t={STAT_ID:"1",BATCH:"B1000000",DS_STAT:"Enchendo",DS_DU:"---",CD_DU:"---",ORDER_NUMBER:"0000000001",CD_MATERIAL:"SUC0001",QT_ENV:sap.ui.getCore().byId("inputProdQty").getValue(),UOM_ENV:"KG",DT_INI:sap.ui.getCore().byId("inputDtStart").getValue(),DT_FIM:"",TANK_DEST:"002 - Tanque 2",DS_DEST:"Tanque",ORDER_DEST:"0000000002"};this.oModel.setProperty("/Form",[]);this.oModel.getProperty("/Form").push(t);sap.ui.core.BusyIndicator.hide();this.onSearch();s.success(e.getView().getModel("i18n").getResourceBundle().getText("msgSuccessSave"),{icon:s.Icon.SUCCESS,title:e.getView().getModel("i18n").getResourceBundle().getText("Success"),actions:[sap.m.MessageBox.Action.OK],styleClass:i?"sapUiSizeCompact":"",initialFocus:s.Action.OK});this.oDialog.close()}}},onHomogenizing:function(){var e=this,t=this.getView(),i=!!this.getView().$().closest(".sapUiSizeCompact").length,r=this.oModel.getProperty("/Form"),n=r[0].TYPE_ID,a=r[0].CD_PLANT,l=r[0].CD_TANK,u=r[0].BATCH,T=r[0].TAG,g=sap.ui.getCore().byId("inputProdQty").getValue()||0,c=r[0].UOM_ENV,p=sap.ui.getCore().byId("inputPerc").getValue()||0,d=(new Date).toLocaleDateString(),_=(new Date).toLocaleTimeString(),D=r[0].DT_INI.substr(0,10),C=r[0].DT_INI.substr(11,8),S=sap.ui.getCore().byId("dtStart").getValue(),y=sap.ui.getCore().byId("inputDtFin"),I=sap.ui.getCore().byId("inputDtFin").getValue().substr(0,10),h=sap.ui.getCore().byId("inputDtFin").getValue().substr(11,9),N="PSG/Inbound/ShopFloor/TankProdConfirmation/Query/XAC_TankProdConfirmationSelectQuery",M=`I_JSON={"HOST": "MII", "DT_ENV": "${d}","HR_ENV":"${_}", "CD_PLANT": "${a}", "CD_TANK": "${l}", "BATCH": "${u}", "CD_TAG": "${T}", "QT_PROD": "${g}", "UOM_PROD": "${c}", "NO_PCT_TANK": "${p}"}`,A="PSG/Inbound/ShopFloor/WHSProdConfirmation/Query/XAC_WHSProdConfirmationSelectQuery",P=`I_JSON={"HOST": "MII", "DT_ENV": "${d}","HR_ENV":"${_}","CD_PLANT": "${a}", "CD_TANK": "${l}", "BATCH": "${u}", "CD_TAG": "${T}", "QT_PROD": "${g}", "UOM_PROD": "${c}", "NO_PCT_TANK": "${p}"}`,V="PSG/Inbound/ShopFloor/OpStatusBlenderAutomation/Query/XAC_OpStatusBlenderAutomationInsertQuery",b=`I_JSON={"HOST": "MII", "DT_ENV": "${d}","HR_ENV":"${_}","CD_PLANT": "${a}", "BATCH": "${u}", "CD_TANK": "${l}", "DT_INI_ENCH": "${D}", "HR_INI_ENCH": "${C}",  "DT_FIM_ENCH": "${I}", "HR_FIM_ENCH": "${h}", "STAT_ID": "3", "QT_ENV": "${g}", "UOM_ENV": "${c}"}`,E=`I_JSON={"HOST": "MII", "DT_ENV": "${d}","HR_ENV":"${_}","CD_PLANT": "${a}", "BATCH": "${u}", "CD_TANK": "${l}", "DT_INI_ENCH": "${D}", "HR_INI_ENCH": "${C}",  "DT_FIM_ENCH": "${I}", "HR_FIM_ENCH": "${h}", "STAT_ID": "2", "QT_ENV": "${g}", "UOM_ENV": "${c}"}`,R=sap.ui.getCore().byId("finalConfirm").getSelectedIndex();let m={STAT_ID:"2",BATCH:"B1000000",DS_STAT:"Homogeinizando",DS_DU:"---",CD_DU:"---",ORDER_NUMBER:"0000000001",CD_MATERIAL:"SUC0001",QT_ENV:sap.ui.getCore().byId("inputProdQty").getValue(),UOM_ENV:"KG",DT_INI:sap.ui.getCore().byId("inputDtStart").getValue(),DT_FIM:sap.ui.getCore().byId("inputDtFin").getValue(),TANK_DEST:"002 - Tanque 2",DS_DEST:"Tanque",ORDER_DEST:"0000000002"};if(!y.getValue()&&y.getValue()<S||!y._bValid){o.show(t.getModel("i18n").getResourceBundle().getText("errMsgInvalidInput"));y.setValueState("Error")}else{y.setValueState("None");if(R===1){let t={STAT_ID:"3",BATCH:"B1000000",DS_STAT:"Em Análise",DS_DU:"Decisão de Uso",CD_DU:parseInt(Math.random()*1e7),ORDER_NUMBER:"0000000001",CD_MATERIAL:"SUC0001",QT_ENV:sap.ui.getCore().byId("inputProdQty").getValue(),UOM_ENV:"KG",DT_INI:sap.ui.getCore().byId("inputDtStart").getValue(),DT_FIM:sap.ui.getCore().byId("inputDtFin").getValue(),TANK_DEST:"002 - Tanque 2",DS_DEST:"Tanque",ORDER_DEST:"0000000002"};this.oModel.setProperty("/Form",[]);this.oModel.getProperty("/Form").push(t);this.onSearch();this.oDialog.close();s.success(e.getView().getModel("i18n").getResourceBundle().getText("msgSuccessSave")+" - Doc. No: "+parseInt(Math.random()*1e9),{icon:s.Icon.SUCCESS,title:e.getView().getModel("i18n").getResourceBundle().getText("Success"),actions:[sap.m.MessageBox.Action.OK],styleClass:i?"sapUiSizeCompact":"",initialFocus:s.Action.OK})}else{let t={STAT_ID:"2",BATCH:"B1000000",DS_STAT:"Homogeinizando",DS_DU:"---",CD_DU:"---",ORDER_NUMBER:"0000000001",CD_MATERIAL:"SUC0001",QT_ENV:sap.ui.getCore().byId("inputProdQty").getValue(),UOM_ENV:"KG",DT_INI:sap.ui.getCore().byId("inputDtStart").getValue(),DT_FIM:sap.ui.getCore().byId("inputDtFin").getValue(),TANK_DEST:"002 - Tanque 2",DS_DEST:"Tanque",ORDER_DEST:"0000000002"};this.oModel.setProperty("/Form",[]);this.oModel.getProperty("/Form").push(t);e.onSearch();s.success(e.getView().getModel("i18n").getResourceBundle().getText("msgSuccessSave"),{icon:s.Icon.SUCCESS,title:e.getView().getModel("i18n").getResourceBundle().getText("Success"),actions:[sap.m.MessageBox.Action.OK],styleClass:i?"sapUiSizeCompact":"",initialFocus:s.Action.OK});sap.ui.core.BusyIndicator.hide();e.oDialog.close()}}},onAnalyze:function(){var e=this,t=!!this.getView().$().closest(".sapUiSizeCompact").length,o=this.oModel.getProperty("/Form"),i=o[0].CD_PLANT,r=o[0].CD_TANK,n=o[0].BATCH,a=sap.ui.getCore().byId("inputProdQty").getValue()||0,l=o[0].UOM_ENV,u=(new Date).toLocaleDateString(),T=(new Date).toLocaleTimeString(),g=o[0].DT_INI.substr(0,10),c=o[0].DT_INI.substr(11,8),p=o[0].DT_FIM.substr(0,10),d=o[0].DT_FIM.substr(11,8),_=this.oModel.getProperty("/Form")[0].CD_DU,D="PSG/Inbound/ShopFloor/OpStatusBlenderAutomation/Query/XAC_OpStatusBlenderAutomationInsertQuery",C=`I_JSON={"HOST": "MII", "DT_ENV": "${u}","HR_ENV":"${T}","CD_PLANT": "${i}", "BATCH": "${n}", "CD_TANK": "${r}", "DT_INI_ENCH": "${g}", "HR_INI_ENCH": "${c}",  "DT_FIM_ENCH": "${p}", "HR_FIM_ENCH": "${d}", "STAT_ID": "4", "QT_ENV": "${a}", "UOM_ENV": "${l}"}`,S=this.getView().getModel("i18n").getResourceBundle();if(_&&_!=="---"){let e={STAT_ID:"4",BATCH:"B1000000",DS_STAT:"Liberado",DS_DU:"Decisão de Uso",CD_DU:_,ORDER_NUMBER:"0000000001",CD_MATERIAL:"SUC0001",QT_ENV:sap.ui.getCore().byId("inputProdQty").getValue(),UOM_ENV:"KG",DT_INI:sap.ui.getCore().byId("inputDtStart").getValue(),DT_FIM:sap.ui.getCore().byId("inputDtFin").getValue(),TANK_DEST:"002 - Tanque 2",DS_DEST:"Tanque",ORDER_DEST:"0000000002"};this.oModel.setProperty("/Form",[]);this.oModel.getProperty("/Form").push(e);s.success(S.getText("msgSuccessSave")+" "+"0000000001",{icon:s.Icon.SUCCESS,title:S.getText("Success"),actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],styleClass:t?"sapUiSizeCompact":"",initialFocus:s.Action.OK});this.onSearch();this.oDialog.close()}else{s.error(S.getText("errMsgNotCreatedDU"),{icon:s.Icon.WARNING,title:S.getText("Attention"),actions:[sap.m.MessageBox.Action.OK],styleClass:t?"sapUiSizeCompact":"",initialFocus:s.Action.OK});e.onSearch();sap.ui.core.BusyIndicator.hide()}},onReleased:function(){var e=this,t=!!this.getView().$().closest(".sapUiSizeCompact").length,o=this.oModel.getProperty("/Form")[0],i=o.CD_PLANT,r=o.CD_TANK,n=o.BATCH,a=o.CD_DU,l=sap.ui.getCore().byId("inputProdQty").getValue()||0,u=o.UOM_ENV,T=(new Date).toLocaleDateString(),g=(new Date).toLocaleTimeString(),c=o.DT_INI.substr(0,10),p=o.DT_INI.substr(11,8),d=o.DT_FIM.substr(0,10),_=o.DT_FIM.substr(11,8),D=this.getView().getModel("i18n").getResourceBundle(),C="PSG/Inbound/ShopFloor/OpStatusBlenderAutomation/Query/XAC_OpStatusBlenderAutomationInsertQuery",S=`I_JSON={"HOST": "MII", "DT_ENV": "${T}","HR_ENV":"${g}","CD_PLANT": "${i}", "BATCH": "${n}", "CD_TANK": "${r}", "DT_INI_ENCH": "${c}", "HR_INI_ENCH": "${p}",  "DT_FIM_ENCH": "${d}", "HR_FIM_ENCH": "${_}", "STAT_ID": "5", "QT_ENV": "${l}", "UOM_ENV": "${u}"}`;let y={STAT_ID:"5",BATCH:"B1000000",DS_STAT:"Transferindo",DS_DU:"Decisão de Uso",CD_DU:a,ORDER_NUMBER:"0000000001",CD_MATERIAL:"SUC0001",QT_ENV:sap.ui.getCore().byId("inputProdQty").getValue(),UOM_ENV:"KG",DT_INI:sap.ui.getCore().byId("inputDtStart").getValue(),DT_FIM:sap.ui.getCore().byId("inputDtFin").getValue(),TANK_DEST:"002 - Tanque 2",DS_DEST:"Tanque",ORDER_DEST:"0000000002"};this.oModel.setProperty("/Form",[]);this.oModel.getProperty("/Form").push(y);s.success(D.getText("msgSuccessSave")+" "+"0000000001",{icon:s.Icon.SUCCESS,title:D.getText("Success"),actions:[sap.m.MessageBox.Action.OK],styleClass:t?"sapUiSizeCompact":"",initialFocus:s.Action.OK});this.onSearch();this.oDialog.close()},onTransferring:function(){var e=this,t=!!this.getView().$().closest(".sapUiSizeCompact").length,o=this.oModel.getProperty("/Form"),i=o.CD_PLANT,r=o.CD_TANK,n=o.BATCH,a=o.TAG,l=this.oModel.getProperty("/Form").ORDER_DEST,u=this.oModel.getProperty("/Form").CD_TANK_DEST,T=sap.ui.getCore().byId("inputProdQty").getValue()||0,g=o.UOM_ENV,c=sap.ui.getCore().byId("inputPerc").getValue()||0,p=(new Date).toLocaleDateString(),d=(new Date).toLocaleTimeString(),_=this.getView().getModel("i18n").getResourceBundle(),D="PSG/Inbound/ShopFloor/TankProdConfirmation/Query/XAC_TankTransfConfirmation",C=`I_JSON={"HOST": "MII", "DT_ENV": "${p}","HR_ENV":"${d}","CD_PLANT": "${i}", "ORDEM_DEST": "${l}", "TANK_DEST": "${u}", "CD_TANK": "${r}", "CD_TAG": "${a}", "BATCH": "${n}", "QT_PROD": "${T}", "UOM_PROD": "${g}"}`,S="PSG/Inbound/ShopFloor/OpStatusBlenderAutomation/Query/XAC_OpStatusBlenderAutomationInsertQuery",y=`I_JSON={"HOST": "MII", "DT_ENV": "${p}","HR_ENV":"${d}","CD_PLANT": "${i}", "BATCH": "", "CD_TANK": "${r}", "DT_INI_ENCH": "", "HR_INI_ENCH": "",  "DT_FIM_ENCH": "", "HR_FIM_ENCH": "", "STAT_ID": "6", "QT_ENV": 0, "UOM_ENV": "${g}"}`;let I={STAT_ID:"6",BATCH:"B1000000",DS_STAT:"Vazio",DS_DU:"---",CD_DU:"---",ORDER_NUMBER:"0000000001",CD_MATERIAL:"SUC0001",QT_ENV:0,UOM_ENV:"KG",DT_INI:"",DT_FIM:"",TANK_DEST:"003 - Tanque 3 ",DS_DEST:"Tanque",ORDER_DEST:"0000000002"};this.oModel.setProperty("/Form",[]);this.oModel.getProperty("/Form").push(I);s.success(_.getText("msgSuccessSave")+" "+"0000000001",{icon:s.Icon.SUCCESS,title:_.getText("Success"),actions:[sap.m.MessageBox.Action.OK],styleClass:t?"sapUiSizeCompact":"",initialFocus:s.Action.OK});this.onSearch();this.oDialog.close()},onCheckChangeTankStat:function(e,t,o){var i=!!this.getView().$().closest(".sapUiSizeCompact").length,r=this,n;o=="H"?n=this.i18n.getResourceBundle().getText("changeTankStat"):n=this.i18n.getResourceBundle().getText("changeTankStatEmpty");sap.ui.core.BusyIndicator.show(0);s.warning(n,{icon:s.Icon.WARNING,title:this.i18n.getResourceBundle().getText("Attention"),actions:[sap.m.MessageBox.Action.OK],styleClass:i?"sapUiSizeCompact":"",initialFocus:s.Action.OK,onClose:function(o){r.onAjaxRequest(e,t).then(e=>{r.onSearch();s.success(r.getView().getModel("i18n").getResourceBundle().getText("msgSuccessSave"),{icon:s.Icon.SUCCESS,title:r.getView().getModel("i18n").getResourceBundle().getText("Success"),actions:[sap.m.MessageBox.Action.OK],styleClass:i?"sapUiSizeCompact":"",initialFocus:s.Action.OK});r.oDialog.close()},e=>{s.error(r.getView().getModel("i18n").getResourceBundle().getText("errMsgErrUpdateStat")+" - "+e,{icon:s.Icon.ERROR,title:r.getView().getModel("i18n").getResourceBundle().getText("Attention"),actions:[sap.m.MessageBox.Action.OK],styleClass:i?"sapUiSizeCompact":"",initialFocus:s.Action.OK});sap.ui.core.BusyIndicator.hide()})}})},onChangePerc:function(e){var t=e.getSource();if(t.getValue()){if(t.getValue()<=0){t.setValue(0)}if(t.getValue()>100){t.setValue(100)}}else{t.setValue(0)}},onGetTankType:function(e){switch(e){case 0:return"BL";case 1:return"BF";case 2:return"AT"}},onAjaxRequest:function(e,t){var o=this,s=`/XMII/Illuminator?QueryTemplate=${e}&Content-Type=text/json`,i,r=this.getView().getModel("i18n").getResourceBundle().getText("errMsgNoData"),n=this.getView().getModel("i18n").getResourceBundle().getText("errRequestMsg");e==="PSG/Inbound/ShopFloor/MovingTanks/Transaction/MovingTanks"?i=true:i=false;i?s=`/XMII/Runner?Transaction=${e}&Content-Type=text/json&OutputParameter=O_RESULT`:s=`/XMII/Illuminator?QueryTemplate=${e}&Content-Type=text/json`;o.oModel.setProperty("/docnum","");var a=new Promise(function(e,a){$.ajax({type:"POST",url:s,data:t?t:"",timeout:6e5}).done(function(t){if(i){if(t.Document.Rowsets.Rowset.Row.CODERROR===0){e(t.Document.Rowsets.Rowset.Row.MSGERROR)}else{a(t.Document.Rowsets.Rowset.Row.MSGERROR)}}else{if(typeof t.Rowsets.Rowset==="undefined"){a(n)}else{if(t.Rowsets.Rowset[0].Row){if(t.Rowsets.Rowset[0].Row[0].CODERROR!==0){if(t.Rowsets.Rowset[0].Row[0].CODERROR==200){a(t.Rowsets.Rowset[0].Row[0].CODERROR);o.oModel.setProperty("/docnum",t.Rowsets.Rowset[0].Row[0].DOC_NUM)}else{a(t.Rowsets.Rowset[0].Row[0].MSGERROR)}}else{e(t.Rowsets.Rowset[0].Row)}}else{a(r)}}}}).fail(function(e,t,o){a(o)})});return a},onCreateDialog:function(e){const t=this.oModel.getProperty("/plantSelected"),o=this.oModel.getProperty("/tankSelected"),s=this.oModel.getProperty("/Form"),i=new Date,r=new Date(i.getTime()-i.getTimezoneOffset()*6e4).toISOString();this.oModel.setProperty("/descPlant");if(e==="item"){this.oDialog=new sap.ui.xmlfragment("br.com.konitech.CockpitManualControlVolumesTransf.fragments.Item",this);this.getView().addDependent(this.oDialog);this.oDialog.open()}else{this.oDialog=new sap.ui.xmlfragment("br.com.konitech.CockpitManualControlVolumesTransf.fragments.MovingTanks",this);var n=sap.ui.getCore().byId("tableTankDest"),a=sap.ui.getCore().byId("bt_add_tank_dest");this.getView().addDependent(this.oDialog);sap.ui.core.BusyIndicator.show(0);this.onTankMoviment(template,s,t,o).then(e=>{sap.ui.getCore().byId("dtStart").setValue(e.DT_ENV_INI);sap.ui.getCore().byId("combo_plant").setSelectedKey(e.CD_PLANT);sap.ui.getCore().byId("combo_tank").setSelectedKey(e.CD_TANK);sap.ui.getCore().byId("inpBatch").setValue(e.BATCH);sap.ui.getCore().byId("inputQuantTankOriginal").setValue(e.QUANT);this.oModel.setProperty("/formTankOrig",e);n.setMode("None");a.setEnabled(false);n.getModel().setProperty("/isEdit",false);this.oDialog.open();sap.ui.core.BusyIndicator.hide()},e=>{sap.ui.getCore().byId("dtStart").setValue(r.substr(0,r.length-5));sap.ui.getCore().byId("combo_plant").setSelectedKey(s.CD_PLANT);sap.ui.getCore().byId("combo_tank").setSelectedKey(s.CD_TANK);sap.ui.getCore().byId("inpBatch").setValue(s.BATCH);sap.ui.getCore().byId("inputQuantTankOriginal").setValue(s.QT_ENV);this.oModel.setProperty("/formTankOrig","");n.setMode("Delete");n.getModel().setProperty("/isEdit",true);a.setEnabled(true);this.onAddPress();this.oDialog.open();sap.ui.core.BusyIndicator.hide()})}},onTankMoviment:function(e,o,s,i){var r=this,n={tankDest:[]},a=this.oModel.getProperty("/ComboTanksDest"),l=new t(n),u=`I_JSON={"HOST":"", "DT_ENV":"", "HR_ENV":"", "CD_PLANT":"${s}", "CD_TANK": "${i}", "BATCH": "${o.BATCH}"}&I_REQ=MOV`,T=`I_JSON={"HOST":"", "DT_ENV":"", "HR_ENV":"", "CD_PLANT":"${s}", "CD_TANK": "${i}", "BATCH": "${o.BATCH}"}&I_REQ=DEST`;sap.ui.getCore().byId("tableTankDest").setModel(l);var g=new Promise(function(t,o){r.onAjaxRequest(e,u).then(s=>{if(s.length>0){t(s[0]);r.onAjaxRequest(e,T).then(e=>{if(e.length>0){e.forEach(e=>{n.tankDest.push({comboTankDest:{selectedKey:e.CD_TANK,items:a},PCT_TANK:e.PCT_TANK,QUANT_TANK:e.QUANT,UOM_TANK:e.UOM})});sap.ui.getCore().byId("tableTankDest").getModel().refresh()}},e=>{o(e)})}else{o()}},e=>{o(e)})});return g},onCloseDialog:function(){this.oDialog.close()},onCancelEdit:function(){this.oDialog.close()},onAfterClose:function(){this.oDialog.destroy()},onGetPage:function(){return this.getView().byId("mainPage")},onMovTanks:function(){var e=this.oModel.getProperty("/plantSelected"),t=this.oModel.getProperty("/tankSelected"),o="PSG/App/CockpitManualCtrlVolTransf/Query/XAC_CheckTankSecurity",i=`I_JSON={"CD_PLANT":"${e}", "CD_TANK": "${t}"}`;sap.ui.core.BusyIndicator.show(0);this.onAjaxRequest(o,i).then(e=>{if(e[0].STATUS==="---"||e[0].STATUS=="false"){this.onCreateDialog("movTanks")}else{s.warning(i18n.getText("blockAutoMsg"),{icon:s.Icon.WARNING,title:this.getView().getModel("i18n").getResourceBundle().getText("Attention"),actions:[sap.m.MessageBox.Action.OK],styleClass:bCompact?"sapUiSizeCompact":"",initialFocus:s.Action.OK})}sap.ui.core.BusyIndicator.hide()},e=>{this.onCreateDialog("movTanks");sap.ui.core.BusyIndicator.hide()})},deleteRow:function(e){var t=e.getParameter("listItem").getBindingContext().getPath(),o=t.split("/")[2],s=sap.ui.getCore().byId("tableTankDest"),i=s.getModel().getData(),r=e.getParameters().listItem.getCells();r[0].setValueState("None");r[1].setValueState("None");r[2].setValueState("None");i.tankDest.splice(o,1);s.getModel().setData(i);this.onChangeEndQuant()},onAddPress:function(e){var t=this.oModel.getProperty("/ComboTanksDest"),o=sap.ui.getCore().byId("tableTankDest"),s=this.oModel.getProperty("/Form").UOM_ENV,i={comboTankDest:{selectedKey:"",items:t},PCT_TANK:"",QUANT_TANK:"",UOM_TANK:s};o.setKeyboardMode(sap.m.ListKeyboardMode.Edit);o.getModel().getData().tankDest.push(i);o.getModel().refresh()},onChangeTankDest:function(e){var t=sap.ui.getCore().byId("combo_tank").getSelectedKey(),o=e.getSource().getSelectedKey(),s=e.oSource.getParent(),i=s.getCells(),r=i[0],n=this.oModel.getProperty("/ComboTanksDest");i[4].setText(n.filter(e=>e.CD_TANK===o)[0].ORDER_NUMBER);if(o){if(o===t){r.setValueState(sap.ui.core.ValueState.Error);r.setValueStateText(this.i18n.getResourceBundle().getText("errTankOrigEqDest"))}else{r.setValueState(sap.ui.core.ValueState.None)}}else{r.setValueState(sap.ui.core.ValueState.Error);r.setValueStateText(this.i18n.getResourceBundle().getText("errTankDestEmpty"))}},onChangeQuantTankMov:function(e){var t=sap.ui.getCore().byId("inputQuantTankOriginal").getValue(),o=sap.ui.getCore().byId("inputQuantTankMov"),s=sap.ui.getCore().byId("inputQuantTankMov").getValue();if(parseFloat(s)<=0){o.setValueState(sap.ui.core.ValueState.Error);o.setValueStateText(this.i18n.getResourceBundle().getText("errQuantTankMovLess"))}else{o.setValueState(sap.ui.core.ValueState.None)}if(parseFloat(s)>parseFloat(t)){o.setValueState(sap.ui.core.ValueState.Error);o.setValueStateText(this.i18n.getResourceBundle().getText("errQuantTankMov"))}else{o.setValueState(sap.ui.core.ValueState.None)}},onChangeAction:function(e){var t=e.getSource().getSelectedButton().sId,o=sap.ui.getCore().byId("inputQuantTankMov");t==="F"?o.setVisible(true):o.setVisible(false);this.onChangeEndQuant()},onChangeEndQuant:function(){var e=sap.ui.getCore().byId("inputQuantTankMov"),t=sap.ui.getCore().byId("inputQuantTankOriginal").getValue(),o=sap.ui.getCore().byId("tableTankDest"),s=o.getModel().getData().tankDest,i=s.reduce((e,t)=>parseFloat(e)+(parseFloat(t["QUANT_TANK"])||0),0);e.setValue(t-i)},onChangePctTankDest:function(e){var t=e.oSource.getParent(),o=t.getCells(),s=e.getSource().getValue()/100,i=sap.ui.getCore().byId("inputQuantTankOriginal").getValue(),r=o[1],n=o[2],a=0;if(s<=0){r.setValueState(sap.ui.core.ValueState.Error);r.setValueStateText(this.i18n.getResourceBundle().getText("errPercentTankMovLess"))}else{r.setValueState(sap.ui.core.ValueState.None);n.setValueState(sap.ui.core.ValueState.None);a=i*s;n.setValue(a.toFixed());this.onChangeEndQuant()}},onChangeQuantTankDest:function(e){var t=e.oSource.getParent(),o=t.getCells(),s=e.getSource().getValue(),i=sap.ui.getCore().byId("inputQuantTankOriginal").getValue(),r=o[1],n=o[2],a=0;n.setValue(parseFloat(s).toFixed());if(parseFloat(n.getValue())<=0){n.setValueState(sap.ui.core.ValueState.Error);n.setValueStateText(this.i18n.getResourceBundle().getText("errQuantTankMovLess"))}else{if(parseFloat(n.getValue())>parseFloat(i)){n.setValueState(sap.ui.core.ValueState.Error);n.setValueStateText(this.i18n.getResourceBundle().getText("errQuantTankMov"))}else{n.setValueState(sap.ui.core.ValueState.None);r.setValueState(sap.ui.core.ValueState.None);a=s/i*100;r.setValue(a.toFixed(3));this.onChangeEndQuant()}}},onSaveMovingTanks:function(){var e=this,t=sap.ui.getCore().byId("tableTankDest"),i=t.getModel().getData().tankDest,r=sap.ui.getCore().byId("dtStart").getValue(),n=sap.ui.getCore().byId("combo_plant").getSelectedKey(),a=sap.ui.getCore().byId("combo_tank").getSelectedKey(),l=sap.ui.getCore().byId("inputMoveActions").getSelectedIndex()===0?"I":"F",u=sap.ui.getCore().byId("inpBatch").getValue(),T=sap.ui.getCore().byId("inputQuantTankMov").getValue(),g=sap.ui.getCore().byId("inputQuantTankOriginal").getValue(),c=i.reduce((e,t)=>parseFloat(e)+(parseFloat(t["PCT_TANK"])||0),0),p=i.reduce((e,t)=>parseFloat(e)+(parseFloat(t["QUANT_TANK"])||0),0),d=!!this.getView().$().closest(".sapUiSizeCompact").length,_=this.oModel.getProperty("/Form").UOM_ENV,D,C=false,S=false,y=false,I=false,h=false,N="";if(l==="F"&&parseFloat(g)<parseFloat(T)){I=true}else{I=false}if(i.length>0){var M=i.map(function(e){return e.comboTankDest.selectedKey}),A=M.some(function(e,t){return M.indexOf(e)!=t});i.forEach(e=>{if(e.comboTankDest.selectedKey==""||e.PCT_TANK<=0||e.QUANT_TANK<=0){C=true}e.comboTankDest.selectedKey===a?S=true:""});c>100?y=true:y=false;p>g?h=true:h=false;if(C||S||y||I||h||A){C?N=this.i18n.getResourceBundle().getText("errTankDestReq"):"";A?N+="\n"+this.i18n.getResourceBundle().getText("errTankDestDuplicate"):"";S?N+="\n"+this.i18n.getResourceBundle().getText("errTankOrigEqDest"):"";y?N+="\n"+this.i18n.getResourceBundle().getText("errPctTankDest"):"";I?N+="\n"+this.i18n.getResourceBundle().getText("errTankQuantOrig"):"";h?N+="\n"+this.i18n.getResourceBundle().getText("errQuantTankdDest"):"";s.error(N,{icon:s.Icon.ERROR,title:this.getView().getModel("i18n").getResourceBundle().getText("Error"),actions:[sap.m.MessageBox.Action.OK],styleClass:d?"sapUiSizeCompact":"",initialFocus:s.Action.OK})}else{s.warning(this.i18n.getResourceBundle().getText("msgSaveAsk"),{icon:s.Icon.WARNING,title:this.i18n.getResourceBundle().getText("Attention"),actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],styleClass:d?"sapUiSizeCompact":"",initialFocus:s.Action.CANCEL,onClose:function(t){if(t===s.Action.OK){var o=sap.ui.getCore().byId("tableTankDest").getModel().getData().tankDest,i={TANK_DEST:[]};o.forEach(e=>{i.TANK_DEST.push({CD_TANK_DEST:e.comboTankDest.selectedKey,PCT_TANK:e.PCT_TANK,QUANT_TANK:e.QUANT_TANK,UOM_TANK:_})});if(l==="I"){D=`I_JSON={"HOST": "CockpitControleManual","DT_ENV": "${r.substr(0,10)}", "HR_ENV": "${r.substr(11,8)}","CD_PLANT": "${n}","CD_TANK": "${a}","CD_ACTION": "${l}","BATCH": "${u}","QUANT_TANK": ${g},"UOM_TANK": "${_}"}&I_JSON_MOV=${JSON.stringify(i)}`}else{D=`I_JSON={"HOST": "CockpitControleManual","DT_ENV": "${r.substr(0,10)}", "HR_ENV": "${r.substr(11,8)}","CD_PLANT": "${n}","CD_TANK": "${a}","CD_ACTION": "${l}","BATCH": "${u}","QUANT_TANK": ${T},"UOM_TANK": "${_}"}&I_JSON_MOV=${JSON.stringify(i)}`}e.onConfirmSave(D,l)}}})}}else{o.show(this.i18n.getResourceBundle().getText("errTankDestReq"))}},onConfirmSave:function(e,t){var o=this,i="PSG/Inbound/ShopFloor/MovingTanks/Transaction/MovingTanks",r=!!this.getView().$().closest(".sapUiSizeCompact").length;sap.ui.core.BusyIndicator.show(0);this.onAjaxRequest(i,e).then(e=>{o.onFillTankDest(t).then(e=>{o.onSearch();this.onCloseDialog();s.success(this.getView().getModel("i18n").getResourceBundle().getText("msgSuccessSave"),{icon:s.Icon.SUCCESS,title:this.getView().getModel("i18n").getResourceBundle().getText("Success"),actions:[sap.m.MessageBox.Action.OK],styleClass:r?"sapUiSizeCompact":"",initialFocus:s.Action.OK});sap.ui.core.BusyIndicator.hide()},e=>{s.error(e,{icon:s.Icon.ERROR,title:this.getView().getModel("i18n").getResourceBundle().getText("Error"),actions:[sap.m.MessageBox.Action.OK],styleClass:r?"sapUiSizeCompact":"",initialFocus:s.Action.OK});console.log(e);sap.ui.core.BusyIndicator.hide()})},e=>{s.error(e,{icon:s.Icon.ERROR,title:this.getView().getModel("i18n").getResourceBundle().getText("Error"),actions:[sap.m.MessageBox.Action.OK],styleClass:r?"sapUiSizeCompact":"",initialFocus:s.Action.OK});sap.ui.core.BusyIndicator.hide()})},onFillTankDest:function(e){var t=this,o=this.oModel.getProperty("/paramsSelected").plant,s=this.oModel.getProperty("/Form"),i=sap.ui.getCore().byId("inputQuantTankMov").getValue(),r=sap.ui.getCore().byId("tableTankDest"),n=r.getModel().getData().tankDest,a=(new Date).toISOString().substr(0,10),l=(new Date).toLocaleTimeString(),u="PSG/Inbound/ShopFloor/BatchCreation/Query/XAC_BatchCreationInsertQuery",T,g="PSG/Inbound/ShopFloor/OpStatusBlenderAutomation/Query/XAC_OpStatusBlenderAutomationInsertQuery",c="";if(e==="I"){c=`I_JSON={"HOST": "CockpitManualControl", "DT_ENV": "${a}","HR_ENV":"${l}","CD_PLANT": "${o}", "BATCH": "${s.BATCH}", "CD_TANK": "${s.CD_TANK}", "DT_INI_ENCH": "${s.DT_INI.substr(0,10)}", "HR_INI_ENCH": "${s.DT_INI.substr(11,8)}",  "DT_FIM_ENCH": "${s.DT_FIM.substr(0,10)}", "HR_FIM_ENCH": "${s.DT_INI.substr(11,8)}", "STAT_ID": "5", "QT_ENV": ${s.QT_ENV}, "UOM_ENV": "${s.UOM_ENV}"}`}else{c=`I_JSON={"HOST": "CockpitManualControl", "DT_ENV": "${a}","HR_ENV":"${l}","CD_PLANT": "${o}", "BATCH": "${s.BATCH}", "CD_TANK": "${s.CD_TANK}", "DT_INI_ENCH": "${s.DT_INI.substr(0,10)}", "HR_INI_ENCH": "${s.DT_INI.substr(11,8)}",  "DT_FIM_ENCH": "${s.DT_FIM.substr(0,10)}", "HR_FIM_ENCH": "${s.DT_INI.substr(11,8)}", "STAT_ID": "4", "QT_ENV": ${i}, "UOM_ENV": "${s.UOM_ENV}"}`}var p=new Promise(function(e,s){t.onAjaxRequest(g,c).then(i=>{n.forEach(i=>{T=`I_JSON={"HOST": "CockpitManualControl", "DT_ENV": "${a}","HR_ENV":"${l}", "CD_PLANT": "${o}", "ORDER_NUMBER":"${i.ORDER_NUMBER}",  "CD_TANK": "${i.comboTankDest.selectedKey}"}`;t.onAjaxRequest(u,T).then(r=>{c=`I_JSON={"HOST": "MII", "DT_ENV": "${a}","HR_ENV":"${l}","CD_PLANT": "${o}", "BATCH": "${r[0].BATCH}", "CD_TANK": "${i.comboTankDest.selectedKey}", "DT_INI_ENCH": "${a}", "HR_INI_ENCH": "${l}",  "DT_FIM_ENCH": "", "HR_FIM_ENCH": "", "STAT_ID": "1", "QT_ENV": ${i.QUANT_TANK}, "UOM_ENV": "${i.UOM_TANK}"}`;t.onAjaxRequest(g,c).then(t=>{console.log(t);e(t)},e=>{s(e)})},e=>{s(e)})})},e=>{s(e)})});return p}})});
},
	"br/com/konitech/CockpitManualControlVolumesTransf/fragments/Item.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" \r\n    xmlns:core="sap.ui.core" \r\n    xmlns:l="sap.ui.layout" \r\n    xmlns:f="sap.ui.layout.form" \r\n    xmlns:html="http://www.w3.org/1999/xhtml"><Dialog title="{/tileTitle}" afterClose="onAfterClose" class="sapUiSizeCompact"><Panel id="itemPanel" expanded="true"><f:SimpleForm id="fragmentForm" editable="true" layout="ResponsiveGridLayout" labelSpanXL="3" labelSpanL="3" labelSpanM="3" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="4" emptySpanL="4" emptySpanM="4" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1" singleContainerFullSize="false"><f:content><Label text="{i18n>label_plant}" labelFor="inputPlant"/><Input id="inputPlant" value="{/plantDescSelected}" editable="false" /><Label text="{i18n>label_order_number}" labelFor="inputOrder"/><Input id="inputOrder" value="{/Form/0/ORDER_NUMBER}" editable="false" /><Label text="{i18n>label_tank}" labelFor="inputTank"/><Input id="inputTank" value="{/tankDescSelected}" editable="false" /><Label text="{i18n>label_batch}" labelFor="inputBatch"/><Input id="inputBatch" value="{/Form/0/BATCH}" editable="false" /><Label text="{i18n>label_du}" labelFor="inputDU"/><ObjectStatus id="inputDU" text="{/Form/0/DS_DU}" state="{ parts: [ {path: \'/Form/0/CD_DU\'} ], formatter : \'.formatter.colorStatusDU\' }" visible="{/duVisible}"/><Label text="{i18n>label_DtStart}" labelFor="dtStart"/><DateTimePicker id="dtStart" value="{/Form/0/DT_INI}" displayFormat="short" valueFormat="yyyy-MM-dd HH:mm:ss" required="true" editable="false" visible="{/dtStVisible}" /><Label text="{i18n>label_DtStart}" labelFor="inputDtStart"/><DateTimePicker id="inputDtStart" value="{ path: \'/Form/0/DT_INI\', formatter: \'.formatter.isDateFilled\' }" displayFormat="short" valueFormat="yyyy-MM-dd HH:mm:ss" required="true" editable="{/isDtStEdit}" visible="{/inputDtStVisible}" /><Label text="{i18n>label_DtFin}" labelFor="dtFin"/><DateTimePicker id="dtFin" value="{/Form/0/DT_FIM}" displayFormat="short" valueFormat="yyyy-MM-dd HH:mm:ss" required="true" editable="false" visible="{/dtFinVisible}" /><Label text="{i18n>label_DtFin}" labelFor="inputDtFin"/><DateTimePicker id="inputDtFin" value="{ path: \'/Form/0/DT_FIM\', formatter: \'.formatter.isDateFilled\' }" displayFormat="short" valueFormat="yyyy-MM-dd HH:mm:ss" required="true" visible="{/inputDtFinVisible}" /><Label text="{i18n>label_qty}" labelFor="prodQty" /><Input id="prodQty" value="{/Form/0/QT_ENV}" required="true"  editable="false" visible="{/qtEnvVisible}" /><Label text="{i18n>label_qty}" labelFor="inputProdQty"/><Input id="inputProdQty" value="{ path: \'/Form/0/QT_ENV\', formatter: \'.formatter.isFilled\' }" required="true" type="Number" visible="{/inputQtEnvVisible}" /><Label text="{i18n>label_uom}" labelFor="inputUOM"/><Input id="inputUOM" value="{/Form/0/UOM_ENV}" editable="false" visible="{/uomVisible}"/><Label text="{i18n>label_perc}" labelFor="inputPerc"/><Input id="inputPerc" value="{/TANK_PROD_PERC}" change="onChangePerc" type="Number" visible="{/percVisible}" /><Label text="{i18n>label_TypeDest}" labelFor="typeDest" /><RadioButtonGroup id="typeDest" select="onSelectRadio" columns="2" editable="false" visible="{/typeDestVisible}"><buttons><RadioButton id="FARM" text="{i18n>label_optionFarm}"/><RadioButton id="ENVASE" text="{i18n>label_optionEnvase}"/></buttons></RadioButtonGroup><Label text="{i18n>label_tankDest}" labelFor="inputTankDest"/><Input id="inputTankDest" value="{/Form/0/TANK_DEST}" editable="false" visible="{/TankDestVisible}"/><Label text="{i18n>label_orderDest}" labelFor="inputOrderDest"/><Input id="inputOrderDest" value="{/Form/0/ORDER_DEST}" editable="false" visible="{/OrderDestVisible}"/><Label text="{i18n>label_finalConfirm}" labelFor="finalConfirm" /><RadioButtonGroup id="finalConfirm" columns="2" visible="{/finalConfirm}"><buttons><RadioButton id="YES" text="{i18n>label_optionNo}"/><RadioButton id="NO" text="{i18n>label_optionYes}"/></buttons></RadioButtonGroup></f:content></f:SimpleForm></Panel><buttons><Button id="btAction" text="{/btText}" type="Accept" icon="sap-icon://accept" press="onPress"/><Button text="{i18n>button_cancel}" type="Reject" icon="sap-icon://decline" press="onCancelEdit"/></buttons></Dialog></core:FragmentDefinition>',
	"br/com/konitech/CockpitManualControlVolumesTransf/fragments/MovingTanks.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" \r\n    xmlns:core="sap.ui.core" \r\n    xmlns:l="sap.ui.layout" \r\n    xmlns:f="sap.ui.layout.form" \r\n    xmlns:html="http://www.w3.org/1999/xhtml"><Dialog title="{i18n>titleMovingTanks}" afterClose="onAfterClose" class="sapUiSizeCompact"><Panel id="itemPanel" expanded="true"><f:SimpleForm id="fragmentForm" title="{i18n>title_OriginTank}" editable="true" layout="ResponsiveGridLayout" labelSpanXL="3" labelSpanL="3" labelSpanM="3" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="4" emptySpanL="4" emptySpanM="4" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1" singleContainerFullSize="false"><f:content><Label text="{i18n>label_DtStartMov}" labelFor="dtStart" /><DateTimePicker id="dtStart" displayFormat="short" valueFormat="yyyy-MM-dd HH:mm:ss" editable="false" /><Label text="{i18n>label_plant}" labelFor="combo_plant" /><ComboBox id="combo_plant" items="{ path: \'/Plants\', sorter: { path: \'text\' }}" change="onChangeComboPlant" editable="false"><core:Item key="{CD_PLANT}" text="{DS_PLANT}" /></ComboBox><Label text="{i18n>label_filterTank}" labelFor="combo_tank" /><ComboBox id="combo_tank" items="{ path: \'/ComboTanks\', sorter: { path: \'text\' } }" editable="false"><core:Item key="{CD_TANK}" text="{DS_TANK}" /></ComboBox><Label text="{i18n>label_moveAction}" labelFor="inputMoveActions" /><RadioButtonGroup id="inputMoveActions" columns="2" select="onChangeAction"><buttons><RadioButton id="I" text="{i18n>label_optionI}" /><RadioButton id="F" text="{i18n>label_optionF}" /></buttons></RadioButtonGroup><Label text="{i18n>label_batch}" labelFor="inputBainpBatchtch" /><Input id="inpBatch" editable="false" /><Label text="{i18n>label_quantTankOriginal}" labelFor="inputQuantTankOriginal" /><Input id="inputQuantTankOriginal" editable="false" /><Label text="{i18n>label_quantTankMov}" labelFor="inputQuantTankMov" /><Input id="inputQuantTankMov" change="onChangeQuantTankMov" value="{ path: \'QUANT_TANK\', formatter: \'.formatter.numberSeparator\' }" visible="false" editable="false" type="Number" /></f:content></f:SimpleForm><MessageStrip id="msgStripErr" text="{i18n>msgErrStrip}" type="Error" showIcon="true" showCloseButton="false" class="sapUiMediumMarginBottom" visible="{/isStripVisible}" /><Table id="tableTankDest" items="{path: \'/tankDest\'}" sticky="ColumnHeaders" mode="Delete" delete="deleteRow" alternateRowColors="true" contextualWidth="Auto"><headerToolbar><Toolbar><content><Title text="Tanque Destino" level="H2" /><ToolbarSpacer /><Button id="bt_add_tank_dest" icon="sap-icon://add" press=".onAddPress" type="Transparent" /></content></Toolbar></headerToolbar><columns><Column minScreenWidth="Large" demandPopin="true"><Text text="{i18n>columnTankDest}" /></Column><Column minScreenWidth="Large" demandPopin="true"><Text text="{i18n>columnPctTank}" /></Column><Column minScreenWidth="Large" demandPopin="true"><Text text="{i18n>columnQuantTank}" /></Column><Column minScreenWidth="Large" demandPopin="true" hAlign="Center"><Text text="{i18n>columnUomTank}" /></Column><Column minScreenWidth="Large" demandPopin="true" hAlign="Center" visible="false"><Text text="{i18n>label_order_number}" /></Column></columns><items><ColumnListItem type="Active"><cells><ComboBox selectedKey="{comboTankDest/selectedKey}" editable="{/isEdit}" change="onChangeTankDest" items="{ path: \'comboTankDest/items\', templateShareable: false, sorter: { path: \'text\' } }"><core:Item key="{CD_TANK}" text="{DS_TANK}" /></ComboBox><Input type="Number" value="{PCT_TANK}" change="onChangePctTankDest" /><Input type="Number" value="{QUANT_TANK}" change="onChangeQuantTankDest" /><Text text="{UOM_TANK}" /><Text text="{ORDER_NUMBER}" /></cells></ColumnListItem></items></Table></Panel><buttons><Button id="btAction" text="{i18n>button_save}" type="Accept" icon="sap-icon://accept" press="onSaveMovingTanks" /><Button text="{i18n>button_cancel}" type="Reject" icon="sap-icon://decline" press="onCancelEdit" /></buttons></Dialog></core:FragmentDefinition>',
	"br/com/konitech/CockpitManualControlVolumesTransf/i18n/i18n.properties":'\r\n# ------- Aplication -------\r\n\r\n#XTIT: Application title\r\nhead_title=Cockpit para Controle Manual dos Status e Quantidade Transferidas\r\n\r\n#XTIT: Application name\r\nappTitle=Cockpit para Controle Manual dos Status e Quantidade Transferidas\r\n\r\n#YDES: Application description\r\nappDescription=Cockpit para Controle Manual dos Status e Quantidade Transferidas\r\n\r\n# ------- Filters Items --------\r\n\r\n#XFITEM: Filter Item\r\nlabel_filterPlant=Planta\r\n\r\n#XFITEM: Filter Item\r\nlabel_filterTankTypes=Tipos de Tanque\r\n\r\n#XFITEM: Filter Item\r\nlabel_filterTank=Tanque\r\n\r\n#XFTXT: Filter Text\r\nlabel_optionBL=BL - Blender\r\n\r\n#XFTXT: Filter Text\r\nlabel_optionBF=BF - Buffer\r\n\r\n#XFTXT: Filter Text\r\nlabel_optionAT=AT - ATF\r\nlabel_quantTankOriginal=Quantidade Inicial\r\nlabel_quantTankMov=Quantidade Final\r\nlabel_moveAction=A\\u00e7\\u00e3o Movimenta\\u00e7\\u00e3o\r\nlabel_optionI=Iniciar\r\nlabel_optionF=Finalizar\r\n\r\n#XBTXT: Button text\r\nbutton_search=Buscar\r\n\r\nbutton_mov_tanks=Movimentar Tanques\r\n\r\nbutton_mov_tanks_i=Movimenta\\u00e7\\u00e3o Iniciada\r\n\r\n# ------- Form Items --------\r\n\r\n#XFTXT: Filter Text\r\nlabel_status=Status\r\nlabel_du=DU\r\nlabel_process_order=Ordem de Processo\r\nlabel_batch=Lote (Batch)\r\nlabel_quantity=Quantidade\r\nlabel_dt_ini=Dt./Hr. In\\u00edcio Enchimento\r\nlabel_dt_fin=Dt./Hr. Fim Enchimento\r\nlabel_type_dest=Tipo de Destino\r\nlabel_destiny=Destino\r\n\r\n# ------- Tiles Desc. Status --------\r\nstat_filling = Enchendo\r\nstat_homogenizing=Homogeneizando\r\nstat_analyze=An\\u00e1lise\r\nstat_released=Liberado\r\nstat_transferring=Transferindo\r\nstat_empty=Vazio\r\n\r\ntitle_batch=Cria\\u00e7\\u00e3o de Lote (Batch)\r\ntitle_prod_confirm=Apontamento de Produ\\u00e7\\u00e3o\r\ntitle_waiting=Aguardando DU\r\ntitle_available=Dispon\\u00edvel para Transfer\\u00eancia\r\ntitle_transferring=Em transfer\\u00eancia\r\ntitle_confirm=Apontamento\r\ninf_dest_confirm= Confirmar Destino\r\ntitle_OriginTank=Tanque Origem\r\n\r\n# ------- Fragment Form Labels--------\r\n\r\nlabel_plant=Planta\r\nlabel_order_number=Ordem\r\nlabel_batch=Lote (Batch)\r\nlabel_tank=Tanque\r\nlabel_DtStart=Dt/Hr In\\u00edcio Enchimento\r\nlabel_qty=Quantidade Produzida\r\nlabel_uom=Unidade de Medida\r\nlabel_optionFarm=FARM\r\nlabel_optionEnvase=ENVASE\r\nlabel_finalConfirm=Finaliza\\u00e7\\u00e3o (Executar Apontamento)\r\nlabel_optionYes=Sim\r\nlabel_optionNo=N\\u00e3o\r\nlabel_TypeDest=Tipo de Destino\r\nlabel_tankDest=Tanque Destino\r\nlabel_du=DU\r\nlabel_orderDest=Ordem Destino\r\nlabel_perc=Percentual de Produ\\u00e7\\u00e3o para o Tanque\r\nlabel_DtFin=Dt/Hr Fim Enchimento\r\ninputOrderDest=Ordem Destino\r\nlabel_DtStartMov =Dt/Hr In\\u00edcio Movimenta\\u00e7\\u00e3o\r\n\r\nbutton_save=Salvar\r\nbutton_cancel=Cancelar\r\n\r\nbutton_execute=Executar\r\nbutton_confirm=Confirmar\r\n\r\ntitle_status1=Est\\u00e1gio 1 - Enchimento (Cria\\u00e7\\u00e3o do Lote)\r\ntitle_status2= Est\\u00e1gio 2 \\u2013 Homog. (Apontamento)\r\ntitle_status3=Est\\u00e1gio 3 \\u2013 An\\u00e1lise (Retorno DU)\r\ntitle_status4=Est\\u00e1gio 4 \\u2013 Libera\\u00e7\\u00e3o.\r\ntitle_status5=Est\\u00e1gio 5 \\u2013 Transfer\\u00eancia (Finaliza\\u00e7\\u00e3o)\r\n\r\ninfo_next_step=Pr\\u00f3xima Etapa\r\n\r\ntitle_tile_current_step=Etapa Atual\r\n\r\ntitleMovingTanks=Movimenta\\u00e7\\u00e3o de tanques\r\n\r\ncolumnTankDest=Tanque Destino\r\ncolumnPctTank=Porcentagem\r\ncolumnQuantTank=Quantidade\r\ncolumnUomTank=Unidade de medida\r\n\r\n#YMSG: Error dialog description\r\n\r\nAttention=Aten\\u00e7\\u00e3o\r\nmsgSaveAsk=Deseja gravar os dados?\r\nSuccess=Sucesso\r\n\r\nerrMovTankStart = Movimenta\\u00e7\\u00e3o de tanque iniciada, n\\u00e3o \\u00e9 poss\\u00edvel efetuar a\\u00e7\\u00e3o de mudan\\u00e7a do est\\u00e1gio do tanque.\r\nmessageErrorGetPlants=Erro ao retornar os plantas existentes\r\nerrMsgNoData=Nenhum dado encontrado\r\nerrMsgModuleSum=Soma dos m\\u00f3dulos devem ser 0 ou 100%\r\nerrMsgSelectValidPlant=Selecionar uma planta v\\u00e1lida\r\nerrMsgInvalidDate=Data inv\\u00e1lida\r\nerrMsgInvalidInputFilters=Filtros inv\\u00e1lidos. Verificar os par\\u00e2metros de entrada.\r\nerrMsgInvalidInput=Campos inv\\u00e1lidos ou n\\u00e3o preenchidos.\r\nerrMsgRequiredInput=Campo obrigat\\u00f3rio.\r\nerrRequestMsg=Ocorreu erro ao requisitar dados no servidor. Verifique a conex\\u00e3o com a internet e tente novamente.\r\nerrMsgNotCreatedDU=N\\u00e3o foi criada a DU para este lote.\r\nmsgSave=Deseja realmente salvar?\r\nmsgConfirmation=Deseja executar?\r\nmsgDelete=Deseja realmente deletar os items selecionados?\r\nmsgDelItem=Selectionar pelo menos 1 item para excluir\r\nerrMsgErrSave=Erro ao atualizar os dados!\r\nerrMsgErrConfirmStat2=Erro ao apontar! Verifique os dados e tente novamente.\r\nerrMsgErrUpdateStat2=Erro ao atualizar status do tanque\r\nmsgSuccessSave=Dados atualizados com sucesso!\r\nmsgErrDelete=Erro ao deletar\r\nmsgCancel=Deseja realmente cancelar? \\n \\n Os dados alterados ser\\u00e3o perdidos.\r\nmsgEditItemSel= Selecionar apenas 1 registro para editar\r\nmsgEditMinItemSel=Selecionar pelo menos 1 registro para editar\r\nmsgSelectPlant=Selecionar uma planta\r\nmsgFaseIni=Etapa j\\u00e1 iniciada ou n\\u00e3o realizada.\r\nerrMsgErrBatchCreation=Erro ao criar Lote (batch) verifique os dados e tente novamente\r\nError=Erro\r\nerrMsgAccess=Este usu\\u00e1rio n\\u00e3o tem autoriza\\u00e7\\u00e3o de acesso \\u00e1 esta tela. Verifique com o administrador do sistema.\r\nerrMsgEdit= Voc\\u00ea n\\u00e3o possui autoriza\\u00e7\\u00e3o para editar.\r\nerrQuantTankMov=Quantidade a ser movimentada \\u00e9 maior que a quantidade original\r\nerrQuantTankMovLess=Quantidade a ser movimentada n\\u00e3o pode ser menor ou igual a 0\r\nerrPercentTankMovLess=Porcentagem n\\u00e3o pode ser menor ou igual a 0\r\nerrTankOrigEqDest= Tanque destino n\\u00e3o pode ser igual que o tanque origem\r\nerrTankDestEmpty=Selecionar pelo menos um tanque destino\r\nerrTankDestReq=Preencher todos os campos do Tanque Destino.\r\nerrTankQuantOrig=Quantidade do Tanque a ser movimentado n\\u00e3o pode ser maior que a quantidade definido do tanque.\r\nerrPctTankDest=Porcentagem total do(s) tanque(s) destino n\\u00e3o pode ser maior que 100.\r\nerrQuantTankdDest=Quantidade total do(s) tanque(s) destino n\\u00e3o pode ser maior que a quantidade do tanque origem.\r\nerrTankDestDuplicate= Tanques destino duplicado. Selecione outro tanque para a movimenta\\u00e7\\u00e3o.\r\nmsgErrStrip=N\\u00e3o existe tanque com programa\\u00e7\\u00e3o na data vigente e/ou tanque com status Vazio, para usar como destino da movimenta\\u00e7\\u00e3o.\r\nchangeTankStat= O lote j\\u00e1 foi apontado para o dep\\u00f3sito. Alterando o status do tanque para Em An\\u00e1lise. \r\nchangeTankStatEmpty= J\\u00e1 foi efetuado a transfer\\u00eancia para este dep\\u00f3sito. Alterando o status do tanque para Vazio. \r\nblockAutoMsg=Comunica\\u00e7\\u00e3o de dados com o SAP est\\u00e1 HABILITADA na automa\\u00e7\\u00e3o. A\\u00e7\\u00f5es executadas nesta tela, n\\u00e3o ser\\u00e3o permitidas. Verificar tela de par\\u00e2metros para o tanque/m\\u00f3dulo no sistema de automa\\u00e7\\u00e3o.',
	"br/com/konitech/CockpitManualControlVolumesTransf/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"br.com.konitech.CockpitManualControlVolumesTransf","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"{{appTitle}}","description":"{{appDescription}}","sourceTemplate":{"id":"ui5template.basicSAPUI5ApplicationProject","version":"1.38.11"}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"rootView":{"viewName":"br.com.konitech.CockpitManualControlVolumesTransf.view.App","type":"XML","async":true,"id":"App"},"dependencies":{"minUI5Version":"1.60.1","libs":{}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"br.com.konitech.CockpitManualControlVolumesTransf.i18n.i18n"}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"br.com.konitech.CockpitManualControlVolumesTransf.view","controlAggregation":"pages","controlId":"app","clearControlAggregation":false},"routes":[{"name":"RouteApp","pattern":"","target":["Main"]}],"targets":{"Main":{"viewType":"XML","viewName":"Main"}}}}}',
	"br/com/konitech/CockpitManualControlVolumesTransf/model/models.js":function(){sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"br/com/konitech/CockpitManualControlVolumesTransf/util/formatter.js":function(){sap.ui.define([],function(){"use strict";return{localeDate:function(e){const r=new Date(e);if(e==="TimeUnavailable"||!e){return""}else if(e==="Próxima Etapa"){return e}else{return r?r.toLocaleDateString()+" "+r.toLocaleTimeString():""}},colorStatusTanque:function(e){var r="None";if(e){switch(e){case 1:r="Information";break;case 2:r="Information";break;case 3:r="Warning";break;case 4:r="Success";break;case 5:r="Success";break;case 6:r="None";break}}return r},colorStatusDU:function(e){var r="None";if(e){switch(e){case"A1":r="Success";break;case"A2":r="Warning";break;case"R1":r="Error";break;case"R2":r="Error";break}}return r},numberSeparator:function(e){return e?e.toLocaleString():0},isFilled:function(e){if(e||e!=="---"){return e}else{return""}},isDateFilled:function(e){if(e!=="TimeUnavailable"){return e}else{return""}}}});
},
	"br/com/konitech/CockpitManualControlVolumesTransf/view/App.view.xml":'<mvc:View controllerName="br.com.konitech.CockpitManualControlVolumesTransf.controller.App" \r\n\txmlns:mvc="sap.ui.core.mvc" displayBlock="true" \r\n\txmlns="sap.m"><Shell appWidthLimited="false"><App id="app"></App></Shell></mvc:View>',
	"br/com/konitech/CockpitManualControlVolumesTransf/view/Main.view.xml":'<mvc:View class="sapUiSizeCompact" \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns:core="sap.ui.core" \r\n    xmlns="sap.m" \r\n    xmlns:f="sap.f" \r\n    xmlns:l="sap.ui.layout" \r\n    xmlns:lf="sap.ui.layout.form" \r\n    xmlns:fb="sap.ui.comp.filterbar" \r\n    xmlns:vm="sap.ui.comp.variants" \r\n    xmlns:t="sap.ui.table" controllerName="br.com.konitech.CockpitManualControlVolumesTransf.controller.Main" height="100%"><f:DynamicPage id="mainPage" headerExpanded="{/headerExpanded}"><f:title><f:DynamicPageTitle><f:heading><Title id="title" text="{i18n>head_title}"/></f:heading><f:actions><ToolbarSpacer/><Image src="img/Britvic.png" width="100px" /></f:actions></f:DynamicPageTitle></f:title><f:header><f:DynamicPageHeader pinnable="true"><f:content><fb:FilterBar id="filterbar" useToolbar="false" showGoOnFB="false" showFilterConfiguration="false"><fb:filterItems><fb:FilterItem name="filterPlant" label="{i18n>label_filterPlant}"><fb:control><ComboBox id="combo_plant" items="{ path: \'/Plants\', sorter: { path: \'text\' }}" change="onChangeComboPlant" required="true" enabled="{/isEditView}"><core:Item key="{CD_PLANT}" text="{DS_PLANT}"/></ComboBox></fb:control></fb:FilterItem><fb:FilterItem name="filterTankTypes" label="{i18n>label_filterTankTypes}"><fb:control><RadioButtonGroup id="tank_type" columns="2" select="onChangeType" enabled="{/isEditView}"><buttons><RadioButton id="BL" text="{i18n>label_optionBL}"/><RadioButton id="BF" text="{i18n>label_optionBF}"/></buttons></RadioButtonGroup></fb:control></fb:FilterItem><fb:FilterItem name="filterTank" label="{i18n>label_filterTank}"><fb:control><ComboBox id="combo_tank" items="{ path: \'/ComboTanks\', sorter: { path: \'text\' } }" required="true" enabled="{/isEditView}"><core:Item key="{CD_TANK}" text="{DS_TANK}"/></ComboBox></fb:control></fb:FilterItem></fb:filterItems></fb:FilterBar><Toolbar width="100%" id="tb_buttons" height="70px"><ToolbarSpacer/><Button xmlns="sap.m" press="onSearch" text="{i18n>button_search}" id="bt_search" type="Emphasized" enabled="{/isEditView}" /><ToolbarSpacer/></Toolbar></f:content></f:DynamicPageHeader></f:header><f:content><VBox class="sapUiSmallMargin" id="TankContent" visible="{/isVisible}"><lf:SimpleForm id="formTankDestiny" editable="false" layout="ResponsiveGridLayout" labelSpanXL="4" labelSpanL="3" labelSpanM="4" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="4" emptySpanM="0" emptySpanS="0" columnsXL="2" columnsL="1" columnsM="1" singleContainerFullSize="false"><lf:content><core:Title text="{/tankDescSelected}" /><Label text="{i18n>label_status}" /><ObjectStatus text="{/Form/0/STAT_ID} - {/Form/0/DS_STAT}" state="{ parts: [ {path: \'{/Form/0/STAT_ID\'} ], formatter : \'.formatter.colorStatusTanque\' }"/><Label text="{i18n>label_du}" /><ObjectStatus text="{/Form/0/DS_DU} {/Form/0/CD_DU}" state="{ parts: [ {path: \'{/Form/0/CD_DU\'} ], formatter : \'.formatter.colorStatusDU\' }"/><Label text="{i18n>label_process_order}" /><Text text="{/Form/0/ORDER_NUMBER} {/Form/0/CD_MATERIAL}" /><Label text="{i18n>label_batch}" /><Text text="{/Form/0/BATCH}" /><Label text="{i18n>label_quantity}" /><Text text="{/Form/0/QT_ENV} KG" /><Label text="{i18n>label_dt_ini}" /><Text text="{/Form/0/DT_INI}" /><Label text="{i18n>label_dt_fin}" /><Text text="{/Form/0/DT_FIM}" /><core:Title id="destTitle" text="{/Form/0/TANK_DEST}" /><Label text="{i18n>label_type_dest}" labelFor="textDsDest" /><Text id="textDsDest" text= "{= ${/Form/0/ORDER_DEST} === \'\' ? \'\' : ${/Form/0/DS_DEST}}" visible="{/isVisibleBL}" /><Label text="{i18n>label_destiny}" labelFor="textDestiny" /><Text id="textDestiny" text="{/Form/0/TANK_DEST}" visible="{/isVisibleBL}" /><Label text="{i18n>label_process_order}" labelFor="textProcess" /><Text id="textProcess" text="{/Form/0/ORDER_DEST}" visible="{/isVisibleBL}" /><Button icon="sap-icon://split" press="onMovTanks" text="{i18n>button_mov_tanks}" id="bt_mov_tanks" visible="{/isVisibleButtonMov}"/></lf:content></lf:SimpleForm><TileContainer id="statusTanks" height="300px"><StandardTile icon="sap-icon://cause" number="1" numberUnit="{i18n>stat_filling}" title="{/titleTile1}" info="{/infoTile1}" press="onPressTile" /><StandardTile icon="sap-icon://filter-facets" number="2" numberUnit="{i18n>stat_homogenizing}" title="{/titleTile2}" info="{path: \'/infoTile2\', formatter: \'.formatter.localeDate\' }" press="onPressTile" /><StandardTile icon="sap-icon://lab" number="3" numberUnit="{i18n>stat_analyze}" title="{/titleTile3}" info="{/infoTile3}" infoState="{ parts: [ {path: \'/Form/CD_DU\'} ], formatter : \'.formatter.colorStatusDU\' }" press="onPressTile" /><StandardTile icon="sap-icon://activity-items" number="4" numberUnit="{i18n>stat_released}" title="{/titleTile4}" info="{/infoTile4}" press="onPressTile" /><StandardTile icon="sap-icon://action" number="5" numberUnit="{i18n>stat_transferring}" title="{/titleTile5}" info="{/infoTile5}" press="onPressTile" /><StandardTile icon="sap-icon://pipeline-analysis" number="6" numberUnit="{i18n>stat_empty}" title="{/titleTile6}" info="" press="onPressTile" /></TileContainer></VBox></f:content></f:DynamicPage></mvc:View>'
}});
